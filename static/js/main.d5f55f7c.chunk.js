(this["webpackJsonptrivia-react"]=this["webpackJsonptrivia-react"]||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(4),i=n(0),s=n.n(i),u=n(31),l=n.n(u),o=n(3),m=n(32),f=n.n(m),h=new function e(){Object(o.a)(this,e),this.init=function(){f.a.initialize({gtmId:"GTM-55KMLRF"})}},p=function(){var e=(new Date).getFullYear();return s.a.createElement(s.a.Fragment,null,s.a.createElement("footer",null,"\xa9 ",e," Oscar Villalta"))},v=function(e){var t=e.title;return s.a.createElement("div",{className:"header"},s.a.createElement("h1",null,t))},g=n(7),b=n(75),E=n(76),w=function(e){var t=e.answers,n=e.handleClick;return e.disableAnswers?s.a.createElement(s.a.Fragment,null):s.a.createElement(s.a.Fragment,null,t.map((function(e){return s.a.createElement(E.a,{key:e,onClick:function(e){return n(e)}},e)})))},d=n(74),O=function(e){var t=e.question;return s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,null,s.a.createElement("h2",null,t)))},j=n(8),k=n(11),q=n(9),y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.question="",this.answers=[],this.correctAnswer="",Object.assign(this,t)},x=n(33),N=n(34),C=n.n(N),P=new(function(){function e(){Object(o.a)(this,e),this.httpClient=void 0,this.httpClient=C.a.create({baseURL:"https://opentdb.com"})}return Object(q.a)(e,[{key:"get",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.httpClient.get(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),Q=new(function(){function e(){Object(o.a)(this,e)}return Object(q.a)(e,[{key:"get",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.get("/api.php?amount=10");case 2:return t=e.sent,n=t.data.results,a=A(n),e.abrupt("return",Object(k.shuffle)(a));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),A=function(e){var t=x.AllHtmlEntities.decode;return e.map((function(e){var n=Object(k.concat)(e.incorrect_answers,e.correct_answer).map((function(e){return t(e)}));if("True"!==n[0]){var a=Object(k.shuffle)(n)||[];return new y({question:t(e.question),correctAnswer:t(e.correct_answer),answers:a})}return new y({question:t(e.question),correctAnswer:t(e.correct_answer),answers:n})}))},F=function(){function e(){Object(o.a)(this,e),this.questions=void 0,this.questionPosition=void 0,this.questions=[new y],this.questionPosition=0}return Object(q.a)(e,[{key:"initialize",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.questionPosition=0,e.next=3,this.fetchQuestions();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"advanceQuestion",value:function(){this.questionPosition++}},{key:"getQuestion",value:function(){return this.questions[this.questionPosition]}},{key:"getQuestionsCount",value:function(){return this.questions.length}},{key:"getQuestionsPosition",value:function(){return this.questionPosition}},{key:"fetchQuestions",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.get();case 2:t=e.sent,this.questions=t;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();F.instance=void 0;var I=function(){var e=function(){var e=Object(i.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(""),u=Object(j.a)(s,2),l=u[0],o=u[1],m=Object(i.useState)(10),f=Object(j.a)(m,2),h=f[0],p=f[1],v=Object(i.useState)(!1),g=Object(j.a)(v,2),b=g[0],E=g[1],w=Object(i.useState)(0),d=Object(j.a)(w,2),O=d[0],q=d[1],y=F.getInstance(),x=Object(i.useCallback)((function(){y.getQuestionsPosition()!==y.getQuestionsCount()-1?(y.advanceQuestion(),E(!1),p(10)):a(!1)}),[y]);return Object(i.useEffect)((function(){var e;return n&&(e=setInterval((function(){p((function(e){return null!=e?e-1:null}))}),1e3),0===h&&(clearInterval(e),p(null),function(){var e=y.getQuestion().correctAnswer;o("The answer is: "+e),E(!0),setTimeout((function(){x(),o("")}),5e3)}())),function(){return clearInterval(e)}}),[h,n,y,x]),{gameIsOn:n,init:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.initialize();case 3:a(!0),q(0),p(10),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o("Problem resetting game.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),handleClick:function(e){var t=e.currentTarget.textContent,n=y.getQuestion();t===Object(k.find)(n.answers,(function(e){return e===n.correctAnswer}))?(q(O+(h||0)),x(),o("")):o("that is incorrect")},message:l,question:y.getQuestion(),advanceQuestion:x,countdown:h,disableAnswers:b,score:O}}(),t=e.handleClick,n=e.gameIsOn,a=e.init,u=e.question,l=e.message,o=e.countdown,m=e.disableAnswers,f=e.score;return n?s.a.createElement("div",{className:"game"},s.a.createElement("div",{className:"question-wrapper"},s.a.createElement(O,{question:u.question})),s.a.createElement("div",{className:"message-wrapper"},s.a.createElement(_,{countdown:o})),s.a.createElement("div",{className:"message-wrapper"},s.a.createElement(S,{message:l})),s.a.createElement("div",{className:"answer-wrapper"},s.a.createElement(w,{answers:u.answers,handleClick:t,disableAnswers:m}))):s.a.createElement("div",{className:"game start-page"},s.a.createElement(E.a,{onClick:a},"Start Game"),s.a.createElement("h2",{className:"mt-5"},"Your last score was: ",f),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("a",{href:"#/page-1",id:"blah1","ga-event-id":"test-1"},"Page 1")),s.a.createElement("li",null,s.a.createElement("a",{href:"#/page-2",id:"blah2","ga-event-id":"test-2"},"Page 2")),s.a.createElement("li",null,s.a.createElement("a",{href:"#/page-3",id:"blah3","ga-event-id":"test-3"},"Page 3"))))},S=function(e){var t=e.message;return s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,t))},_=function(e){var t=e.countdown;return s.a.createElement(s.a.Fragment,null,t?s.a.createElement("h3",null,t):"")},T=function(){var e=Object(g.a)();return s.a.createElement(b.b,{history:e},s.a.createElement(b.c,null,s.a.createElement(b.a,{path:"/page-1",exact:!0,component:function(){return s.a.createElement(z,{pageNumber:1})}}),s.a.createElement(b.a,{path:"/page-2",exact:!0,component:function(){return s.a.createElement(z,{pageNumber:2})}}),s.a.createElement(b.a,{path:"/page-3",exact:!0,component:function(){return s.a.createElement(z,{pageNumber:3})}}),s.a.createElement(b.a,{path:"/",component:I})))},z=function(e){var t=e.pageNumber;return s.a.createElement("div",{className:"w-100 text-center"},s.a.createElement("h1",null,"Page-",t),s.a.createElement("a",{href:"#/"},"HOME"),s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){window.gtag("event","bar",{event_category:"test_category",event_label:"test_label"})}},"foo"))},G=function(){return Object(i.useEffect)((function(){h.init()}),[]),s.a.createElement("div",{className:"app"},s.a.createElement(v,{title:"Trivia"}),s.a.createElement("div",{className:"main"},s.a.createElement(T,null)),s.a.createElement(p,null))},M=(n(71),new(n(36).a)("G-1K6KGFYSH7"));!function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.initialize();case 2:l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(G,null)),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()()}},[[72,1,2]]]);
//# sourceMappingURL=main.d5f55f7c.chunk.js.map